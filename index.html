<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie Clicker Fun</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Fredoka One', cursive;
  background: #f9e7d2;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow-x: hidden;
}
#game-container {
  display: flex;
  gap: 50px;
  align-items: flex-start;
}
#main { 
  text-align: center; 
  transform: scale(1.2);
}
h1 {
  font-size: 3em;
  color: #fff;
  background-color: #d2a679;
  display: inline-block;
  padding: 10px 20px;
  border-radius: 15px;
  box-shadow: 4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;
}
#cookie {
  font-size: 160px;
  cursor: pointer;
  margin: 20px auto;
  display: block;
  text-shadow: 4px 4px #b2855a, -4px -4px #f0c99a;
  transition: transform 0.1s, text-shadow 0.1s;
  user-select: none;
}
#cookie:active {
  transform: scale(0.9);
  text-shadow: 2px 2px #b2855a, -2px -2px #f0c99a;
}
#score, #cpc {
  font-size: 2em;
  margin: 10px;
  color: #fff;
  background-color: #d2a679;
  display: inline-block;
  padding: 10px 20px;
  border-radius: 12px;
  box-shadow: 4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;
}
#upgrades { 
  display: flex; 
  flex-direction: column; 
  gap: 15px; 
  max-height: 500px;
  overflow-y: auto;
  padding-right: 10px;
}
button {
  padding: 14px 20px;
  font-size: 1.2em;
  cursor: pointer;
  background-color: #d2a679;
  border: none;
  border-radius: 12px;
  box-shadow: 4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;
  transition: all 0.2s;
  color: #fff;
  font-family: 'Fredoka One', cursive;
}
button:hover {
  background-color: #c9975a;
  box-shadow: 2px 2px 0 #b2855a, inset 0 -4px 0 #f0c99a;
}
.particle {
  position: absolute;
  font-size: 24px;
  pointer-events: none;
  user-select: none;
  animation: fly 1s forwards;
}
@keyframes fly {
  0% { transform: translate(0,0) scale(1); opacity: 1; }
  100% { transform: translate(var(--x), var(--y)) scale(0.5); opacity: 0; }
}
.cursor {
  position: absolute;
  font-size: 40px;
  pointer-events: none;
  animation: float 2s infinite ease-in-out;
}
@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}
#goldenCookie {
  position: absolute;
  font-size: 80px;
  display: none;
  cursor: pointer;
  animation: shine 1s infinite alternate;
}
@keyframes shine {
  from { transform: scale(1); }
  to { transform: scale(1.2); }
}
</style>
</head>
<body>

<div id="game-container">
  <div id="main">
    <h1>Cookie Clicker Fun üç™</h1>
    <div id="cookie">üç™</div>
    <div id="score">0 Cookies</div>
    <div id="cpc">Cookies per click: 1</div>
  </div>
  
  <div id="upgrades">
    <button id="upgrade">Click Booster (+1 CPC, Cost: 10)</button>
    <button id="auto">Auto Clicker (+1/sec, Cost: 50)</button>
    <button id="grandma">Grandma (+5/sec, Cost: 200)</button>
    <button id="factory">Factory (+20/sec, Cost: 1000)</button>
    <button id="mine">Cookie Mine (+100/sec, Cost: 5000)</button>
    <button id="codes">Codes</button>
    <button id="reset">Reset Game</button>
  </div>
</div>

<div id="goldenCookie">‚ú®üç™‚ú®</div>

<script>
let currentUser = null;

// --- Login/Create Account ---
function loginFlow() {
  const action = prompt("Type 'login' to login or 'create' to make a new account:");
  if(!action) return loginFlow();
  if(action.toLowerCase() === 'create'){
    const username = prompt("Enter username:");
    const password = prompt("Enter password:");
    if(!username || !password) return loginFlow();
    const users = JSON.parse(localStorage.getItem('users')||"{}");
    if(users[username]) {
      alert("Username exists! Try login.");
      return loginFlow();
    }
    users[username] = {password, data:{}};
    localStorage.setItem('users', JSON.stringify(users));
    currentUser = username;
    alert("Account created! Logged in as "+username);
    loadUserData();
  } else if(action.toLowerCase() === 'login'){
    const username = prompt("Enter username:");
    const password = prompt("Enter password:");
    const users = JSON.parse(localStorage.getItem('users')||"{}");
    if(!users[username] || users[username].password!==password){
      alert("Invalid login.");
      return loginFlow();
    }
    currentUser = username;
    alert("Logged in as "+username);
    loadUserData();
  } else {
    return loginFlow();
  }
}

function saveUserData() {
  if(!currentUser) return;
  const users = JSON.parse(localStorage.getItem('users')||"{}");
  users[currentUser].data = {score,cookiesPerClick,upgradeCost,upgradeCount,autoClickers,autoCost,grandmaCount,grandmaCost,factoryCount,factoryCost,mineCount,mineCost};
  localStorage.setItem('users', JSON.stringify(users));
}

function loadUserData(){
  const users = JSON.parse(localStorage.getItem('users')||"{}");
  const data = users[currentUser]?.data || {};
  score = data.score||0;
  cookiesPerClick = data.cookiesPerClick||1;
  upgradeCost = data.upgradeCost||10;
  upgradeCount = data.upgradeCount||0;
  autoClickers = data.autoClickers||0;
  autoCost = data.autoCost||50;
  grandmaCount = data.grandmaCount||0;
  grandmaCost = data.grandmaCost||200;
  factoryCount = data.factoryCount||0;
  factoryCost = data.factoryCost||1000;
  mineCount = data.mineCount||0;
  mineCost = data.mineCost||5000;
  updateDisplay();
}

// --- Game Variables ---
let score = 0;
let cookiesPerClick = 1;
let upgradeCount = 0;
let upgradeCost = 10;
let autoClickers = 0;
let autoCost = 50;
let grandmaCount = 0;
let grandmaCost = 200;
let factoryCount = 0;
let factoryCost = 1000;
let mineCount = 0;
let mineCost = 5000;

// --- Elements ---
const cookie = document.getElementById('cookie');
const scoreDisplay = document.getElementById('score');
const cpcDisplay = document.getElementById('cpc');
const upgradeBtn = document.getElementById('upgrade');
const autoBtn = document.getElementById('auto');
const grandmaBtn = document.getElementById('grandma');
const factoryBtn = document.getElementById('factory');
const mineBtn = document.getElementById('mine');
const resetBtn = document.getElementById('reset');
const codesBtn = document.getElementById('codes');
const goldenCookie = document.getElementById('goldenCookie');

// --- Functions ---
function getUpgradeIncrement() { return 1 + Math.floor(upgradeCount / 3); }

function updateDisplay(){
  scoreDisplay.textContent = score + " Cookies";
  cpcDisplay.textContent = "Cookies per click: " + cookiesPerClick;
  upgradeBtn.textContent = `Click Booster (+${getUpgradeIncrement()} CPC, Cost: ${upgradeCost})`;
  autoBtn.textContent = `Auto Clicker (+1/sec, Cost: ${autoCost})`;
  grandmaBtn.textContent = `Grandma (+5/sec, Cost: ${grandmaCost})`;
  factoryBtn.textContent = `Factory (+20/sec, Cost: ${factoryCost})`;
  mineBtn.textContent = `Cookie Mine (+100/sec, Cost: ${mineCost})`;
  saveUserData();
}

// Particle
function createParticle(x, y){
  const particle = document.createElement('div');
  particle.className = 'particle';
  particle.textContent = 'üç™';
  particle.style.left = x + 'px';
  particle.style.top = y + 'px';
  const angle = Math.random()*2*Math.PI;
  const distance = 100 + Math.random()*50;
  particle.style.setProperty('--x', Math.cos(angle)*distance+'px');
  particle.style.setProperty('--y', Math.sin(angle)*distance-50+'px');
  document.body.appendChild(particle);
  setTimeout(()=>particle.remove(),1000);
}

// --- Event Listeners ---
cookie.addEventListener('click', (e)=>{
  score += cookiesPerClick;
  updateDisplay();
  for(let i=0;i<5;i++) createParticle(e.clientX,e.clientY);
});

upgradeBtn.addEventListener('click', ()=>{
  const cost = Math.floor(10*Math.pow(1.3,upgradeCount)); // scaled pricing
  if(score>=cost){
    score -= cost;
    cookiesPerClick += getUpgradeIncrement();
    upgradeCount++;
    updateDisplay();
  } else alert(`Need ${cost} cookies to upgrade!`);
});

autoBtn.addEventListener('click', ()=>{
  if(score>=autoCost){
    score-=autoCost; autoClickers++; autoCost=Math.floor(autoCost*1.5);
    updateDisplay();
  } else alert(`Need ${autoCost} cookies!`);
});

grandmaBtn.addEventListener('click', ()=>{
  if(score>=grandmaCost){score-=grandmaCost; grandmaCount++; grandmaCost=Math.floor(grandmaCost*1.3); updateDisplay();} 
  else alert(`Need ${grandmaCost} cookies!`);
});

factoryBtn.addEventListener('click', ()=>{
  if(score>=factoryCost){score-=factoryCost; factoryCount++; factoryCost=Math.floor(factoryCost*1.3); updateDisplay();} 
  else alert(`Need ${factoryCost} cookies!`);
});

mineBtn.addEventListener('click', ()=>{
  if(score>=mineCost){score-=mineCost; mineCount++; mineCost=Math.floor(mineCost*1.3); updateDisplay();} 
  else alert(`Need ${mineCost} cookies!`);
});

resetBtn.addEventListener('click', ()=>{
  if(confirm("Reset all progress?")){
    score = 0; cookiesPerClick=1; upgradeCount=0; upgradeCost=10;
    autoClickers=0; autoCost=50; grandmaCount=0; grandmaCost=200;
    factoryCount=0; factoryCost=1000; mineCount=0; mineCost=5000;
    updateDisplay();
  }
});

// --- Codes System ---
const codes = {
  "WELCOME100": ()=>{score+=100; alert("100 Cookies Added!");},
  "SUPERCLICK": ()=>{cookiesPerClick+=5; alert("+5 CPC!");},
  "AUTOBONUS": ()=>{autoClickers+=1; alert("+1 AutoClicker!");}
};

codesBtn.addEventListener('click', ()=>{
  const code = prompt("Enter your code:");
  if(code && codes[code.toUpperCase()]){
    codes[code.toUpperCase()]();
    updateDisplay();
  } else alert("Invalid code!");
});

// --- Golden Cookie ---
goldenCookie.addEventListener('click', ()=>{
  const baseReward=50;
  const upgradeBonus=upgradeCount*20;
  const autoBonus=autoClickers*10 + grandmaCount*50 + factoryCount*200 + mineCount*1000;
  const randomBonus=Math.floor(Math.random()*200);
  const reward = baseReward+upgradeBonus+autoBonus+randomBonus;
  score+=reward; updateDisplay();
  alert(`Golden Cookie! üç™ You gained ${reward.toLocaleString()} cookies!`);
  goldenCookie.style.display='none';
});

setInterval(()=>{
  if(Math.random()<0.05 && goldenCookie.style.display==='none'){
    const x = Math.random()*(window.innerWidth-100);
    const y = Math.random()*(window.innerHeight-100);
    goldenCookie.style.left=x+'px';
    goldenCookie.style.top=y+'px';
    goldenCookie.style.display='block';
    setTimeout(()=>goldenCookie.style.display='none',8000);
  }
},5000);

setInterval(()=>{
  if(autoClickers>0) score+=autoClickers;
  if(grandmaCount>0) score+=grandmaCount*5;
  if(factoryCount>0) score+=factoryCount*20;
  if(mineCount>0) score+=mineCount*100;
  updateDisplay();
},1000);

// --- Start Game ---
loginFlow();
updateDisplay();

</script>
</body>
</html>
