<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie Clicker Fun</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body {font-family:'Fredoka One',cursive;background:#f9e7d2;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow-x:hidden;}
#game-wrapper{display:flex;flex-direction:column;align-items:center;width:95%;max-width:1200px;}
#game-container{display:flex;flex-wrap:wrap;justify-content:center;gap:50px;width:100%;}
#main{text-align:center;}
h1{font-size:2.5em;color:#fff;background-color:#d2a679;display:inline-block;padding:10px 20px;border-radius:15px;box-shadow:4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;margin-bottom:20px;}
#cookie{font-size:150px;cursor:pointer;display:block;margin:20px auto;text-shadow:4px 4px #b2855a,-4px -4px #f0c99a;transition:transform 0.1s,text-shadow 0.1s;user-select:none;}
#cookie:active{transform:scale(0.9);text-shadow:2px 2px #b2855a,-2px -2px #f0c99a;}
#score,#cpc{font-size:1.8em;margin:10px 0;color:#fff;background-color:#d2a679;display:inline-block;padding:10px 20px;border-radius:12px;box-shadow:4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;}
#upgrades{display:flex;flex-direction:column;gap:15px;max-height:500px;overflow-y:auto;padding-right:5px;width:250px;}
#upgrades::-webkit-scrollbar{width:10px;}
#upgrades::-webkit-scrollbar-thumb{background:#c9975a;border-radius:10px;}
#upgrades::-webkit-scrollbar-track{background:#f9e7d2;}
button{padding:12px;font-size:1.1em;cursor:pointer;background-color:#d2a679;border:none;border-radius:12px;box-shadow:4px 4px 0 #b2855a, inset 0 -4px 0 #f0c99a;transition:0.2s;color:#fff;font-family:'Fredoka One',cursive;}
button:hover{background-color:#c9975a;box-shadow:2px 2px 0 #b2855a, inset 0 -4px 0 #f0c99a;}
#loginModal,#leaderboardModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;z-index:9999;}
#loginBox,#leaderboardBox{background:#f9e7d2;padding:30px;border-radius:20px;box-shadow:0 0 15px #000;text-align:center;min-width:280px;max-width:90%;}
#loginBox h2,#leaderboardBox h2{margin-bottom:15px;}
#tabs{display:flex;justify-content:center;gap:10px;margin-bottom:20px;}
#tabs button{padding:6px 12px;border:none;border-radius:10px;cursor:pointer;background:#d2a679;color:#fff;}
#tabs button.active{background:#c9975a;}
#loginBox input{display:block;width:80%;padding:8px 10px;margin:10px auto;border-radius:10px;border:1px solid #b2855a;font-size:1em;}
#submitLogin,#closeLeaderboard,#logoutBtn{padding:10px 20px;font-size:1.1em;background:#d2a679;border:none;border-radius:10px;cursor:pointer;color:#fff;font-family:'Fredoka One',cursive;}
#submitLogin:hover,#closeLeaderboard:hover,#logoutBtn:hover{background:#c9975a;}
#leaderboardList{max-height:300px;overflow-y:auto;margin:15px 0;}
#leaderboardList div{margin:5px 0;font-size:1.1em;}
.particle{position:absolute;font-size:24px;pointer-events:none;user-select:none;animation:fly 1s forwards;}
@keyframes fly{0%{transform:translate(0,0) scale(1);opacity:1;}100%{transform:translate(var(--x),var(--y)) scale(0.5);opacity:0;}}
.cursor{position:absolute;font-size:40px;pointer-events:none;animation:float 2s infinite ease-in-out;}
@keyframes float{0%{transform:translateY(0);}50%{transform:translateY(-10px);}100%{transform:translateY(0);}}
#goldenCookie{position:absolute;font-size:80px;display:none;cursor:pointer;animation:shine 1s infinite alternate;}
@keyframes shine{from{transform:scale(1);}to{transform:scale(1.2);}}
</style>
</head>
<body>
<div id="game-wrapper">
  <div id="game-container">
    <div id="main">
      <h1>Cookie Clicker Fun üç™</h1>
      <div id="cookie">üç™</div>
      <div id="score">0 Cookies</div>
      <div id="cpc">Cookies per click: 1</div>
      <button id="logoutBtn">Log Out</button>
    </div>
    <div id="upgrades">
      <button id="upgrade">Click Booster (+1 CPC, Cost: 10)</button>
      <button id="auto">Auto Clicker (+1/sec, Cost: 50)</button>
      <button id="grandma">Grandma (+5/sec, Cost: 200)</button>
      <button id="factory">Factory (+20/sec, Cost: 1000)</button>
      <button id="mine">Cookie Mine (+100/sec, Cost: 5000)</button>
      <button id="codes">Codes</button>
      <button id="leaderboardBtn">Leaderboard</button>
      <button id="reset">Reset Game</button>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal">
  <div id="loginBox">
    <h2 id="modalTitle">Login</h2>
    <div id="tabs">
      <button id="loginTab" class="active">Login</button>
      <button id="createTab">Create Account</button>
    </div>
    <input type="text" id="usernameInput" placeholder="Username">
    <input type="password" id="passwordInput" placeholder="Password">
    <button id="submitLogin">Submit</button>
  </div>
</div>

<!-- Leaderboard Modal -->
<div id="leaderboardModal">
  <div id="leaderboardBox">
    <h2>Leaderboard</h2>
    <div id="leaderboardList"></div>
    <button id="closeLeaderboard">Close</button>
  </div>
</div>

<div id="goldenCookie">‚ú®üç™‚ú®</div>

<script>
let currentUser=null;
let score=0,cookiesPerClick=1,upgradeCount=0,autoClickers=0,grandmaCount=0,factoryCount=0,mineCount=0;

// Elements
const cookie=document.getElementById('cookie'), scoreDisplay=document.getElementById('score'), cpcDisplay=document.getElementById('cpc');
const upgradeBtn=document.getElementById('upgrade'), autoBtn=document.getElementById('auto'), grandmaBtn=document.getElementById('grandma');
const factoryBtn=document.getElementById('factory'), mineBtn=document.getElementById('mine'), resetBtn=document.getElementById('reset');
const codesBtn=document.getElementById('codes'), leaderboardBtn=document.getElementById('leaderboardBtn'), goldenCookie=document.getElementById('goldenCookie');
const loginModal=document.getElementById('loginModal'), loginTab=document.getElementById('loginTab'), createTab=document.getElementById('createTab');
const usernameInput=document.getElementById('usernameInput'), passwordInput=document.getElementById('passwordInput'), submitLogin=document.getElementById('submitLogin');
const logoutBtn=document.getElementById('logoutBtn');
const leaderboardModal=document.getElementById('leaderboardModal'), leaderboardList=document.getElementById('leaderboardList'), closeLeaderboard=document.getElementById('closeLeaderboard');

// --- Login System ---
let isLoginMode=true;
loginTab.addEventListener('click',()=>{isLoginMode=true; loginTab.classList.add('active'); createTab.classList.remove('active'); document.getElementById('modalTitle').textContent="Login";});
createTab.addEventListener('click',()=>{isLoginMode=false; createTab.classList.add('active'); loginTab.classList.remove('active'); document.getElementById('modalTitle').textContent="Create Account";});

submitLogin.addEventListener('click',()=>{
  const username=usernameInput.value.trim(), password=passwordInput.value.trim();
  if(!username||!password){ alert("Fill both fields!"); return; }
  let users=JSON.parse(localStorage.getItem('users')||"{}");
  if(isLoginMode){
    if(users[username] && users[username].password===password){
      currentUser=username;
      loginModal.style.display='none';
      loadUserData();
      refreshLeaderboard();
    } else alert("Invalid username or password!");
  } else {
    if(users[username]){ alert("Username exists!"); return; }
    users[username]={password, data:{score:0,cookiesPerClick:1,upgradeCount:0,autoClickers:0,grandmaCount:0,factoryCount:0,mineCount:0}};
    localStorage.setItem('users', JSON.stringify(users));
    alert("Account created! Login now.");
  }
  localStorage.setItem('currentUser', currentUser);
});

// Auto-login if saved
const savedCurrentUser=localStorage.getItem('currentUser');
if(savedCurrentUser){currentUser=savedCurrentUser; loginModal.style.display='none'; loadUserData(); refreshLeaderboard(); } else loginModal.style.display='flex';

logoutBtn.addEventListener('click',()=>{currentUser=null; localStorage.removeItem('currentUser'); loginModal.style.display='flex';});

// --- Load/Save User Data ---
function loadUserData(){
  const users=JSON.parse(localStorage.getItem('users')||"{}");
  if(users[currentUser]){
    const data=users[currentUser].data;
    score=data.score; cookiesPerClick=data.cookiesPerClick; upgradeCount=data.upgradeCount;
    autoClickers=data.autoClickers; grandmaCount=data.grandmaCount;
    factoryCount=data.factoryCount; mineCount=data.mineCount;
    updateDisplay();
  }
}
function saveUserData(){
  if(!currentUser) return;
  const users=JSON.parse(localStorage.getItem('users')||"{}");
  users[currentUser]={password:users[currentUser].password, data:{score,cookiesPerClick,upgradeCount,autoClickers,grandmaCount,factoryCount,mineCount}};
  localStorage.setItem('users', JSON.stringify(users));
  localStorage.setItem('currentUser', currentUser);
}

// --- Update Display ---
function getUpgradeIncrement(){return 1+Math.floor(upgradeCount/3);}
function updateDisplay(){
  scoreDisplay.textContent=score+" Cookies";
  cpcDisplay.textContent="Cookies per click: "+cookiesPerClick;
  upgradeBtn.textContent=`Click Booster (+${getUpgradeIncrement()} CPC, Cost: ${Math.floor(10*Math.pow(1.3,upgradeCount))})`;
  autoBtn.textContent=`Auto Clicker (+1/sec, Cost: ${Math.floor(50*Math.pow(1.5,autoClickers))})`;
  grandmaBtn.textContent=`Grandma (+5/sec, Cost: ${Math.floor(200*Math.pow(1.3,grandmaCount))})`;
  factoryBtn.textContent=`Factory (+20/sec, Cost: ${Math.floor(1000*Math.pow(1.3,factoryCount))})`;
  mineBtn.textContent=`Cookie Mine (+100/sec, Cost: ${Math.floor(5000*Math.pow(1.3,mineCount))})`;
  saveUserData();
  refreshLeaderboard();
}

// --- Particles ---
function createParticle(x,y){const p=document.createElement('div');p.className='particle';p.textContent='üç™';p.style.left=x+'px';p.style.top=y+'px';const angle=Math.random()*2*Math.PI,distance=100+Math.random()*50;p.style.setProperty('--x',Math.cos(angle)*distance+'px');p.style.setProperty('--y',Math.sin(angle)*distance-50+'px');document.body.appendChild(p);setTimeout(()=>p.remove(),1000);}

// --- Cookie Click ---
cookie.addEventListener('click',(e)=>{score+=cookiesPerClick;updateDisplay();for(let i=0;i<5;i++)createParticle(e.clientX,e.clientY);});

// --- Upgrades ---
upgradeBtn.addEventListener('click',()=>{const cost=Math.floor(10*Math.pow(1.3,upgradeCount)); if(score>=cost){score-=cost; cookiesPerClick+=getUpgradeIncrement(); upgradeCount++; updateDisplay();} else alert(`Need ${cost} cookies!`);});
autoBtn.addEventListener('click',()=>{const cost=Math.floor(50*Math.pow(1.5,autoClickers)); if(score>=cost){score-=cost; autoClickers++; updateDisplay();} else alert(`Need ${cost} cookies!`);});
grandmaBtn.addEventListener('click',()=>{const cost=Math.floor(200*Math.pow(1.3,grandmaCount)); if(score>=cost){score-=cost; grandmaCount++; updateDisplay();} else alert(`Need ${cost} cookies!`);});
factoryBtn.addEventListener('click',()=>{const cost=Math.floor(1000*Math.pow(1.3,factoryCount)); if(score>=cost){score-=cost; factoryCount++; updateDisplay();} else alert(`Need ${cost} cookies!`);});
mineBtn.addEventListener('click',()=>{const cost=Math.floor(5000*Math.pow(1.3,mineCount)); if(score>=cost){score-=cost; mineCount++; updateDisplay();} else alert(`Need ${cost} cookies!`);});

// --- Codes ---
codesBtn.addEventListener('click',()=>{const code=prompt("Enter code:"); if(!code)return;if(code.toLowerCase()==="free100"){score+=100;alert("You got 100 cookies!");}else if(code.toLowerCase()==="boost"){cookiesPerClick+=5;alert("Cookies per click +5!");}else alert("Invalid code!");updateDisplay();});

// --- Reset ---
resetBtn.addEventListener('click',()=>{if(confirm("Reset all progress?")){score=0; cookiesPerClick=1; upgradeCount=0; autoClickers=0; grandmaCount=0; factoryCount=0; mineCount=0; updateDisplay();}});

// --- Golden Cookie ---
goldenCookie.addEventListener('click',()=>{const reward=50+upgradeCount*20+autoClickers*10+grandmaCount*50+factoryCount*200+mineCount*1000+Math.floor(Math.random()*200);score+=reward;updateDisplay();alert("Golden Cookie! You got "+reward+" cookies!");goldenCookie.style.display='none';});
setInterval(()=>{if(Math.random()<0.05 && goldenCookie.style.display==='none'){const x=Math.random()*(window.innerWidth-100),y=Math.random()*(window.innerHeight-100);goldenCookie.style.left=x+"px";goldenCookie.style.top=y+"px";goldenCookie.style.display='block';setTimeout(()=>goldenCookie.style.display='none',8000);}},5000);

// --- Auto income ---
setInterval(()=>{if(autoClickers>0)score+=autoClickers;if(grandmaCount>0)score+=grandmaCount*5;if(factoryCount>0)score+=factoryCount*20;if(mineCount>0)score+=mineCount*100;updateDisplay();},1000);

// --- Leaderboard ---
function refreshLeaderboard(){
  const users=JSON.parse(localStorage.getItem('users')||"{}");
  const entries=[];
  for(const u in users) entries.push({user:u,cookies:users[u].data?.score||0});
  entries.sort((a,b)=>b.cookies-a.cookies);
  leaderboardList.innerHTML="";
  entries.forEach((e,i)=>{const d=document.createElement('div'); d.textContent=`${i+1}. ${e.user} - ${e.cookies.toLocaleString()} Cookies`; leaderboardList.appendChild(d);});
}
leaderboardBtn.addEventListener('click',()=>{refreshLeaderboard(); leaderboardModal.style.display='flex';});
closeLeaderboard.addEventListener('click',()=>{leaderboardModal.style.display='none';});

updateDisplay();
</script>
</body>
</html>
